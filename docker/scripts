Run in order:
docker build -t funding-search-engine:0.0.92 .
docker tag funding-search-engine:0.0.92 jeniustech/funding-search-engine:0.0.92
docker push jeniustech/funding-search-engine:0.0.91

docker pull jeniustech/funding-search-engine:0.0.6

sudo adduser --system --group --no-create-home solr
sudo chown -R solr:solr /var/data/data_solr
sudo chmod -R 755 /var/data/data_solr
uid=113(solr) gid=121(solr) groups=121(solr)

copy uid and gid to docker-compose-solr.yml

sudo chown 8983:8983 /var/data/data_solr/
sudo chmod -R 755 /var/data/data_solr/**

sudo ufw ssh enable
sudo ufw allow '5432'
sudo ufw allow '8983'

docker compose -f docker-compose-portainer.yml up -d
docker compose -f docker-compose-keycloak.yml up -d
docker compose -f docker-compose-postgres.yml up -d
docker compose -f docker-compose-solr.yml up -d
docker compose -f docker-compose-funding-search-engine.yml up -d

sudo apt install certbot python3-certbot-nginx -y

sudo certbot certonly --nginx -d www.innovilyse.com
sudo certbot certonly --nginx -d auth.innovilyse.com
sudo certbot certonly --nginx -d app.innovilyse.com
sudo certbot certonly --nginx -d api.innovilyse.com

sudo ln -s /etc/nginx/sites-available/innovilyse.com.conf /etc/nginx/sites-enabled/
